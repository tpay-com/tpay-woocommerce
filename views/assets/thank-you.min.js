(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};(()=>{const t=window.jQuery;e.n(t)()(document).ready((function(){const e=document.querySelector(".payment-option-blik"),t=document.getElementById("payment-button"),n=document.getElementById("blik-code"),o=document.getElementsByName("payment"),a=document.getElementById("transaction_counter");function c(e,n){e?t.classList.add("loading"):t.classList.remove("loading"),t.disabled=!!n||e,o.forEach((function(t){t.disabled=e}))}function r(){t.disabled=i()&&6!==s().length}function l(){r()}function s(){return(n.value||"").replaceAll(/[^0-9]/g,"")}function i(){return"blik"===function(){const e=document.getElementsByName("payment");for(let t=0,n=e.length;t<n;t++)if(e[t].checked)return e[t].value;return null}()}c(!1),t.addEventListener("click",(function(){i()?function(){e.classList.add("loading"),e.classList.remove("with-error"),document.querySelector(".blik-waiting").style.display="block",c(!0);var t={action:"tpay_blik0_repay",transactionId:tpayThankYou.transactionId,blikCode:s(),transactionCounter:parseInt(a.value),nonce:tpayThankYou.nonce};const n=new URLSearchParams(t).toString();a.value=parseInt(a.value)+1,fetch(tpayThankYou.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}).then((t=>t.json().then((t=>{document.querySelector(".blik-waiting").style.display="none","correct"===t.result?(document.querySelector(".payment-section").style.display="none",document.querySelector(".payment-confirmation-container").style.display="block"):(document.querySelector(".transfer_payment").style.display="block",document.querySelector(".pay-button").style.display="block",3===parseInt(a.value)?(document.querySelector(".blik_payment").style.display="none",document.querySelector(".blik-master-error").style.display="block",c(!1,!0)):(document.querySelector(".payment-section").style.display="block",document.querySelector(".blik-code-section").style.display="block",e.classList.add("with-error"),e.classList.remove("loading"),c(!1)))})))).catch((function(t){document.querySelector(".transfer_payment").style.display="block",document.querySelector(".pay-button").style.display="block",3===parseInt(a.value)?(document.querySelector(".blik_payment").style.display="none",document.querySelector(".blik-master-error").style.display="block"):(document.querySelector(".payment-section").style.display="block",document.querySelector(".blik-code-section").style.display="block",e.classList.add("with-error"),e.classList.remove("loading"),c(!1))}))}():function(){c(!0);var e={action:"tpay_pay_by_transfer",transactionId:tpayThankYou.transactionId,orderId:tpayThankYou.orderId,nonce:tpayThankYou.nonce};const t=new URLSearchParams(e).toString();fetch(tpayThankYou.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}).then((e=>e.json().then((e=>{"correct"===e.status?window.top.location.href=e.payment_url:c(!1,!0)})))).catch((function(e){c(!1)}))}()})),n.addEventListener("keyup",(function(){r();const e=s().split("");e.length>3&&e.splice(3,0," "),n.value=e.join("")})),o.forEach((function(e){e.addEventListener("click",l)})),function(){let t={action:"tpay_blik0_transaction_status",transactionId:tpayThankYou.transactionId,nonce:tpayThankYou.nonce};const n=new URLSearchParams(t).toString();fetch(tpayThankYou.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}).then((t=>t.json().then((t=>{document.querySelector(".blik-waiting").style.display="none","correct"===t.status?(document.querySelector(".payment-section").style.display="none",document.querySelector(".payment-confirmation-container").style.display="block"):(document.querySelector(".payment-section").style.display="block",document.querySelector(".transfer_payment").style.display="block",document.querySelector(".pay-button").style.display="block",document.querySelector(".blik-code-section").style.display="block",e.classList.add("with-error"),e.classList.remove("loading"),c(!1,!0))})))).catch((function(t){e.classList.add("with-error"),e.classList.remove("loading"),c(!1)}))}()}))})()})();